NES APUのミキサーはチャンネルの出力を受け取り、アナログの音声信号に変換する

各チャンネルは、各自のDACを持っており、非線形でチャンネル間の相互作用をもたらす方法で実装されているため、結果の振幅の計算はやや複雑になる


以下の方程式は0.0~1.0の範囲でおおよその音声出力レベルを計算する

パルスと三角/ノイズ/DMCの2つのコンポーネントに分かれており、それぞれ組み合わされた後の合算が結果の音声出力信号となる

```
output = pulse_out + tnd_out

pulse = 95.88 
      / (8128/ (pulse1 + pulse2)) + 100

tnd_out = 159.79 
        / ((1 / (triangle / 8227 + noise / 12241 + dmc / 22638)) + 100)
```

pulse1, pulse2, triangle, noise, dmc はそれぞれのチャンネルの出力値である

dmcの値の範囲は 0 ~ 127 で他は 0 ~ 15 である

いずれかのグループの値がすべて0だった場合、そのグループの結果は0として扱う(0割りを避ける)

より早い、ただ精度の低い近似も可能である(lookupテーブルを使う、またより荒い1次方程式を使う)

NESのハードウェアはDACに続いて複数の low-pass と hight-pass フィルターを追加する驚くほど複雑な回路を搭載している

- 90Hzでの一次ハイパスフィルター
- もう一つ440Hzでの一次ハイパスフィルター
- 14kHzでの一次ローパスフィルター


# 実装


